# เปิด IAP สำหรับ GCE/GKE

Identity-Aware Proxy (IAP) จะคุ้มครองการรับส่งข้อมูลที่ผ่านทางตัวจัดสรรภาระงานเท่านั้น ให้ทำตามขั้นตอนเหล่านี้เพื่อปกป้องแอปจากการโจมตีที่ไม่ได้รับอนุญาต

[ดูข้อมูลเพิ่มเติม](https://cloud.google.com/iap/docs/)

## ต่อไปนี้เป็นขั้นตอนต่างๆ ที่คุณจะทำให้เสร็จสิ้น

### ตรวจสอบการกำหนดค่าเครือข่าย

หาก IP ของตัวจัดสรรภาระงาน `130.211.0.0/22` และ `35.191.0.0/16` เข้าถึงแบ็กเอนด์ของคุณไม่ได้ แสดงว่า IAP **ไม่ทำงาน**

หาก IP อื่นเข้าถึงแบ็กเอนด์ได้แสดงว่าการจราจรของข้อมูลนั้นข้ามนโยบายการเข้าถึง IAP ของคุณ การดำเนินการเช่นนี้อาจเป็นประโยชน์ในบางกรณี เช่น เพื่ออนุญาตให้ระบบตรวจสอบเชื่อมต่อกับแบ็กเอนด์

### ตรวจสอบการกำหนดค่าเครือข่าย

หากการกำหนดค่าเปลี่ยนแปลงไปหลังจากเปิดใช้ IAP การกำหนดค่านั้นอาจไม่ปลอดภัย
ให้ปรับใช้ [Forseti Security][forseti-security] ซึ่งเป็นเครื่องมือโอเพนซอร์สที่ดูแลโดย Google เพื่อตรวจสอบการกำหนดค่าโปรเจ็กต์และส่งการแจ้งเตือนอย่างต่อเนื่อง

### ปรับใช้การตรวจสอบส่วนหัวที่ลงชื่อ

[เรียนรู้วิธี](https://cloud.google.com/iap/docs/signed-headers-howto)ปกป้องแอปของคุณจากการข้ามนโยบายการเข้าถึง IAP เช่น

  *  ผู้ดูแลโปรเจ็กต์ปิดใช้ IAP โดยไม่ได้ตั้งใจ
  *  เกิดข้อผิดพลาดในการกำหนดค่าเครือข่าย
  *  ผู้ใช้เข้าสู่ระบบ VM และเชื่อมต่อกับเว็บเซิร์ฟเวอร์ผ่าน "localhost"

### ยืนยันการกำหนดค่า

ยืนยันว่าคุณได้อ่านและกำหนดค่าทรัพยากร GCE/GKE ตามเอกสารประกอบแล้ว

[แสดงวิธีทำ][spotlight-config-reviewed]

[forseti-security]: https://opensource.google.com/projects/forseti-security
[spotlight-config-reviewed]: walkthrough://spotlight-pointer?spotlightId=iap-network-config-reviewed
